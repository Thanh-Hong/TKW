<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <title>üß© Gh√©p h√¨nh Doraemon</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">      
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>

  <style>
    :root{
      --piece-size:80px;   /* nh·ªè l·∫°i t·ª´ 120 xu·ªëng 80 */
      --cols:4;
      --rows:3;
    }
    body{
            background: linear-gradient(135deg,#fff7db 0%, #dff7ff 50%, #fff0f7 100%);

    }
    .container{
      margin: auto;
      font-family:"Comic Sans MS", Arial, sans-serif;
      background: linear-gradient(135deg,#fff7db 0%, #dff7ff 50%, #fff0f7 100%);
      display:flex;
      flex-direction:column;
      align-items:center;
      padding:10px;
      height: 100vh;
    }

    h1 {
      color:#0077cc;
      margin-bottom:15px;
      font-size:22px;
    }

    .top-area {
      display:flex;
      gap:20px;
      align-items:flex-start;
      justify-content:center;
      flex-wrap:wrap; /* n·∫øu m√†n nh·ªè th√¨ t·ª± xu·ªëng d√≤ng */
    }

    /* khung gh√©p */
    .puzzle-board {
      width: calc(var(--cols) * var(--piece-size));
      height: calc(var(--rows) * var(--piece-size));
      display:grid;
      grid-template-columns: repeat(var(--cols), var(--piece-size));
      grid-template-rows: repeat(var(--rows), var(--piece-size));
      gap:1px;
      background: #9bb7d1;
      border-radius:6px;
      box-shadow:0 4px 10px rgba(0,0,0,0.15);
    }
    .dropzone {
      width: var(--piece-size);
      height: var(--piece-size);
      background: #fff;
      border: 0.5px dashed #bbb;
    }

    /* m·∫£nh gh√©p */
    .pieces {
      margin-top:15px;
      display:grid;
      grid-template-columns: repeat(6, var(--piece-size));
      grid-template-rows: repeat(2, var(--piece-size));
      gap:5px;
      background:#fff;
      padding:8px;
      border-radius:8px;
      box-shadow:0 4px 12px rgba(0,0,0,0.1);
    }
    .piece {
      width: var(--piece-size);
      height: var(--piece-size);
      background-image: url('http://giadinh.mediacdn.vn/thumb_w/640/2017/photo-2-1511253800312.jpg');
      background-size: calc(var(--cols) * var(--piece-size)) calc(var(--rows) * var(--piece-size));
      border:1px solid rgba(0,0,0,0.12);
      border-radius:4px;
      cursor:grab;
      transition: transform 0.2s;
    }
    .piece:hover { transform:scale(1.05); }

    .original {
      text-align:center;
    }
    .original p { margin-bottom:6px; font-size:14px; }
    .original img {
      width: calc(var(--cols) * var(--piece-size) * 0.7); /* nh·ªè h∆°n khung 1 ch√∫t */
      border-radius:6px;
      box-shadow:0 3px 8px rgba(0,0,0,0.15);
    }

    .buttons {
      margin-top:15px;
      display:flex;
      gap:10px;
    }
    button {
      padding:8px 16px;
      font-size:14px;
      border:none;
      border-radius:6px;
      cursor:pointer;
      transition:0.3s;
    }
    .check-btn { background:#28a745; color:#fff; }
    .check-btn:hover { background:#218838; }
    .reset-btn { background:#ff4081; color:#fff; }
    .reset-btn:hover { background:#e73370; }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Nh√≥m 7</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="/html/bainhomTKW/home.html">Home</a>
                </li>
                <li class="nav-item">
                <a class="nav-link" href="/html/bainhomTKW/muasam.html">Mua s·∫Øm</a>
                </li>
                <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Tr√≤ ch∆°i
                </a>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="/html/bainhomTKW/mickey.html">üê≠ Mickey h·ªçc to√°n</a></li>
                    <li><a class="dropdown-item" href="/html/bainhomTKW/doremon.html">üß© Gh√©p h√¨nh Doraemon</a></li>
                    <li><a class="dropdown-item" href="/html/bainhomTKW/noitu.html">Game K√©o Th·∫£ - N·ªëi T·ª´</a></li>
                </ul>
                </li>
            </ul>
            <form class="d-flex" role="search">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search"/>
                <button class="btn btn-outline-success" type="submit">Search</button>
            </form>
            </div>
        </div>
        </nav>
  
  <div class="container">
  <h1>üß© Gh√©p h√¨nh Doraemon</h1>

  <div class="top-area">
    <div class="puzzle-board" id="board"></div>
    <div class="original">
      <p>üìå H√¨nh m·∫´u</p>
      <img src="http://giadinh.mediacdn.vn/thumb_w/640/2017/photo-2-1511253800312.jpg" alt="M·∫´u Doraemon">
    </div>
  </div>

  <div class="pieces" id="pieces"></div>

  <div class="buttons">
    <button class="check-btn" onclick="checkResult()">‚úÖ Ki·ªÉm tra k·∫øt qu·∫£</button>
    <button class="reset-btn" onclick="resetGame()">üîÑ Ch∆°i l·∫°i</button>
  </div>
  </div>

  <script>
    const cols = 4, rows = 3, size = 80;
    const board = document.getElementById('board');
    const piecesContainer = document.getElementById('pieces');


    let pieces = [];

    function initGame(){
      board.innerHTML="";
      piecesContainer.innerHTML="";
      pieces=[];

      // t·∫°o dropzones
      for(let i=0;i<cols*rows;i++){
        const dz = document.createElement('div');
        dz.className="dropzone";
        dz.dataset.index=i;
        board.appendChild(dz);
      }

      // t·∫°o m·∫£nh
      let index = 0;
      for(let y=0;y<rows;y++){
        for(let x=0;x<cols;x++){
          let piece = document.createElement('div');
          piece.className="piece";
          piece.style.backgroundPosition = `-${x*size}px -${y*size}px`;
          piece.dataset.index=index++;
          piece.draggable=true;
          pieces.push(piece);
        }
      }


      // x√°o tr·ªôn
      pieces.sort(()=>Math.random()-0.5);
      pieces.forEach(p=>piecesContainer.appendChild(p));
    }

    // Drag drop
    let dragged=null;
    document.addEventListener("dragstart", e=>{
      if(e.target.classList.contains("piece")){
        dragged=e.target;
      }
    });
    document.addEventListener("dragover", e=>e.preventDefault());
    document.addEventListener("drop", e=>{
      e.preventDefault();
      if(dragged){
        if(e.target.classList.contains("dropzone")){
          if(e.target.firstChild){
            piecesContainer.appendChild(e.target.firstChild);
          }
          e.target.appendChild(dragged);
        }
        else if(e.target.id==="pieces"){
          piecesContainer.appendChild(dragged);
        }
      }
    });



    function checkResult(){
      let correct=true;
      document.querySelectorAll(".dropzone").forEach(zone=>{
        let piece=zone.firstChild;
        if(!piece || piece.dataset.index!==zone.dataset.index){
          correct=false;
        }
      });
      if(correct){
        alert("üéâ Ch√∫c m·ª´ng! B·∫°n ƒë√£ gh√©p ƒë√∫ng Doraemon!");
      }else{
        alert("‚ùå Ch∆∞a ƒë√∫ng, th·ª≠ l·∫°i nh√©!");
      }
    }

    function resetGame(){ initGame(); }

    initGame();
  </script>
</body>
</html>